{"version":3,"file":"main.d1d09f1f0985348cdb25.js","mappings":";;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;ACAA,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,CAAC,EAAC;;;;;;;;;;;;;;;;ACTsB;AACoC;AACpC;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,6DAAc;AAChC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,+DAAgB;AACpC;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,oBAAoB,+DAAgB;AACpC;AACA;AACA;AACA,QAAQ;AACR;AACA,4CAA4C,MAAM;AAClD;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,oBAAoB,2DAAY;AAChC;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kDAAU;AAC7B;AACA,2CAA2C,2BAA2B;AACtE,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAU;AAC5B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,eAAe,kDAAU;AACzB,gDAAgD,QAAQ;AACxD;AACA;AACA;AACA,gBAAgB,kDAAU;AAC1B,cAAc,kDAAU;AACxB,cAAc,kDAAU;AACxB,eAAe,YAAY;AAC3B;AACA,SAAS,8DAAqB,CAAC,EAAE,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAU;AAC9B,gBAAgB,kDAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kDAAU;AACzB,eAAe,kDAAU;AACzB;AACA,gBAAgB,kDAAU;AAC1B;AACA;AACA;AACA;AACA;AACA,eAAe,kDAAU;AACzB;AACA,qBAAqB,6DAAqB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAU;AAC5B;AACA;AACA,cAAc,kDAAU;AACxB,cAAc,kDAAU;AACxB,eAAe,YAAY;AAC3B;AACA,SAAS,8DAAqB,CAAC,EAAE,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAU;AAC5B,kBAAkB,kDAAU;AAC5B;AACA,mBAAmB,WAAW,GAAG,SAAS;AAC1C;AACA;AACA;AACA,sBAAsB,kDAAU;AAChC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kDAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kDAAU;AACjC;AACA;AACA;AACA;AACA;AACA,iBAAiB,kDAAU;AAC3B,wBAAwB,kDAAU;AAClC;AACA,sBAAsB,kDAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAU;AAC1B;AACA,qBAAqB,kDAAU;AAC/B;AACA;AACA,qBAAqB,kDAAU;AAC/B;AACA;AACA,qBAAqB,kDAAU;AAC/B,gBAAgB,kDAAU;AAC1B;AACA,eAAe,kDAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AChRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;ACXuB;AACxB;AACA;AACA;AACA,uBAAuB,KAAK,GAAG,UAAU;AACzC,GAAG;AACH;AACA;AACA,mCAAmC,UAAU,oDAAW;AACxD,wBAAwB;AACxB;AACA;AACA,cAAc,gDAAO,uBAAuB,gDAAO,CAAC;AACpD;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,oBAAoB,EAAE,0DAAiB;AACvC;AACA;AACO;AACP,mBAAmB;AACnB,0BAA0B,wDAAe;AACzC;AACA;AACO;AACP,oBAAoB,EAAE,wDAAe;AACrC;AACA;AACO;AACP,oBAAoB,EAAE,yDAAgB;AACtC;;;;;;;;;;;;;;;;;ACzCA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;;;;;;UCjBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;ACN0B;AAC1B;AAC0B;AACW","sources":["webpack://movie-app/./src/scss/main.scss?bffb","webpack://movie-app/./src/scripts/api.js","webpack://movie-app/./src/scripts/app.js","webpack://movie-app/./src/scripts/form-container.js","webpack://movie-app/./src/scripts/transport.js","webpack://movie-app/./src/scripts/utils.js","webpack://movie-app/webpack/bootstrap","webpack://movie-app/webpack/runtime/compat get default export","webpack://movie-app/webpack/runtime/define property getters","webpack://movie-app/webpack/runtime/hasOwnProperty shorthand","webpack://movie-app/webpack/runtime/make namespace object","webpack://movie-app/./src/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","export default {\r\n  url: 'https://api.themoviedb.org/3',\r\n  key: 'd8b86d06da871cd459c43cc4589bd3a5',\r\n  route: {\r\n    title: '/search/movie',\r\n    popular: '/movie/popular',\r\n    movie: '/movie/',\r\n    genres: '/genre/movie/list',\r\n    poster: {\r\n      original: 'https://image.tmdb.org/t/p/original',\r\n      w500: 'http://image.tmdb.org/t/p/w500/',\r\n      w300: 'http://image.tmdb.org/t/p/w300/',\r\n    },\r\n  },\r\n};\r\n","import {\r\n  getMovieGenres,\r\n  getPopularMovies,\r\n  getMoviesByTitle,\r\n  getMovieById,\r\n} from './transport.js';\r\nimport { createNode, createRatingClassName } from './utils';\r\nimport api from './api';\r\n\r\nconst noPosterSrc = './assets/img/no-poster.jpg';\r\n\r\nconst form = document.querySelector('.form');\r\nconst input = form.querySelector('.input');\r\nconst resetBtn = document.querySelector('.button-reset');\r\nconst submitBtn = document.querySelector('.button-submit');\r\nconst app = document.querySelector('.app');\r\nconst appContent = app.querySelector('.app-content');\r\n\r\nconst genres = {};\r\n\r\nshowLoader();\r\n\r\n// app\r\nwindow.addEventListener('load', async (e) => {\r\n  e.preventDefault();\r\n\r\n  // save genres\r\n  const g = await getMovieGenres();\r\n  if (g.ok === true) {\r\n    const data = await g.json();\r\n    data.genres.forEach((item) => {\r\n      genres[item.id] = item.name;\r\n    });\r\n  }\r\n\r\n  // routes\r\n  const search = window.location.search;\r\n  if (search && search[0] === '?') {\r\n    const query = {};\r\n    const queryArr = search.slice(1, search.length).split('&');\r\n    for (let item of queryArr) {\r\n      const queryArr = item.split('=');\r\n      query[queryArr[0]] = queryArr[1];\r\n    }\r\n\r\n    if (query.id) {\r\n      runFilmPage(query.id);\r\n    } else if (query.search) {\r\n      runSearchPage(decodeURIComponent(query.search));\r\n    } else {\r\n      runIndexPage();\r\n    }\r\n  } else {\r\n    runIndexPage();\r\n  }\r\n\r\n  input.focus();\r\n});\r\n\r\n// form\r\nresetBtn.addEventListener('click', (e) => {\r\n  e.preventDefault();\r\n  clearInput();\r\n  input.focus();\r\n});\r\nsubmitBtn.addEventListener('click', async (e) => {\r\n  e.preventDefault();\r\n  if (input.value.trim()) {\r\n    runSearchPage(input.value.trim());\r\n  }\r\n});\r\ninput.addEventListener('keyup', (e) => {\r\n  if (e.keyCode === 13) {\r\n    e.preventDefault();\r\n    submitBtn.click();\r\n  }\r\n});\r\nfunction clearInput() {\r\n  input.value = '';\r\n}\r\n\r\n// app routes\r\nasync function runIndexPage() {\r\n  const res = await getPopularMovies();\r\n  if (res.ok === true) {\r\n    const data = await res.json();\r\n    renderFilmsList(data);\r\n    hideLoader();\r\n  } else {\r\n    app.append(renderError());\r\n    hideLoader();\r\n  }\r\n}\r\nasync function runSearchPage(title) {\r\n  const res = await getMoviesByTitle(title);\r\n  if (res.ok === true) {\r\n    const data = await res.json();\r\n    window.history.replaceState(\r\n      {},\r\n      '',\r\n      window.location.pathname + `?search=${title}`\r\n    );\r\n    renderFilmsList(data, title);\r\n    hideLoader();\r\n  } else {\r\n    app.append(renderError());\r\n    hideLoader();\r\n  }\r\n}\r\nasync function runFilmPage(id) {\r\n  const res = await getMovieById(id);\r\n  if (res.ok === true) {\r\n    const data = await res.json();\r\n    const filmCard = createFilmInfo(data);\r\n    appContent.append(filmCard);\r\n    hideLoader();\r\n  } else {\r\n    appContent.append(renderError());\r\n    hideLoader();\r\n  }\r\n}\r\n\r\n// app components\r\nfunction renderFilmsList(data, title) {\r\n  resetContent();\r\n  const appTitle = createNode('h2', 'app__title');\r\n  if (title) {\r\n    appTitle.textContent = `Results for \"${title.replace(/%20/g, ' ')}\":`;\r\n  } else {\r\n    appTitle.textContent = 'Our recomendations:';\r\n  }\r\n  appContent.append(appTitle);\r\n\r\n  const results = data.results;\r\n  if (results && Array.isArray(results)) {\r\n    const films = createNode('div', 'film__items');\r\n    results.forEach((film) => {\r\n      const filmCard = createFilmCard(film);\r\n      films.append(filmCard);\r\n    });\r\n    appContent.append(films);\r\n  }\r\n}\r\nfunction createFilmCard(film) {\r\n  const card = createNode('a', 'film__item');\r\n  card.href = window.location.pathname + `?id=${film.id}`;\r\n  // card.target = '_blank';\r\n\r\n  // poster\r\n  const cover = createNode('div', 'poster-overflow');\r\n  const fig = createNode('figure', 'poster-wrapper');\r\n  const img = createNode('img');\r\n  img.alt = `${film.title} - film poster`;\r\n  img.src = film.poster_path\r\n    ? `${api.route.poster.w300}${film.poster_path}`\r\n    : noPosterSrc;\r\n  fig.append(img);\r\n  cover.append(fig);\r\n  card.append(cover);\r\n\r\n  // title\r\n  const titleText = createNode('span', 'text');\r\n  const title = createNode('h3', 'title');\r\n  title.title = film.title;\r\n  titleText.textContent = film.title;\r\n  title.append(titleText);\r\n  card.append(title);\r\n\r\n  // info\r\n  const info = createNode('p', 'info');\r\n  const year = createNode('span', 'info__year');\r\n  year.textContent = film.release_date.split('-')[0];\r\n  const genre = createNode('span', 'info__genre');\r\n  genre.textContent = genres[film.genre_ids[0]] || '';\r\n  info.append(year, genre);\r\n  card.append(info);\r\n\r\n  // rating\r\n  const rate = createNode('p', 'rating');\r\n  const v = film.vote_average || 0;\r\n  rate.classList.add(createRatingClassName(v));\r\n  rate.textContent = v;\r\n  card.append(rate);\r\n\r\n  return card;\r\n}\r\nfunction createFilmInfo(film) {\r\n  let filmTitle = film.original_title;\r\n  const filmYear = film.release_date && film.release_date.split('-')[0];\r\n  const genres = film.genres.map((item) => item.name);\r\n\r\n  const wrapper = createNode('div', 'film');\r\n\r\n  // poster\r\n  const fig = createNode('figure', 'poster-wrapper');\r\n  const img = createNode('img');\r\n  img.alt = `${film.title} - film poster`;\r\n  img.src = film.poster_path\r\n    ? `${api.route.poster.w500}${film.poster_path}`\r\n    : noPosterSrc;\r\n  fig.append(img);\r\n  wrapper.append(fig);\r\n\r\n  // title\r\n  const titleWr = createNode('div', 'title-wrapper');\r\n  const titleEl = createNode('h1', 'title');\r\n  if (filmYear) {\r\n    filmTitle = `${filmTitle} (${filmYear})`;\r\n  }\r\n  titleEl.textContent = filmTitle;\r\n  if (film.tagline) {\r\n    const taglineEl = createNode('p', 'tagline');\r\n    taglineEl.textContent = film.tagline;\r\n    titleWr.append(titleEl, taglineEl);\r\n  } else {\r\n    titleWr.append(titleEl);\r\n  }\r\n  wrapper.append(titleWr);\r\n\r\n  // genres\r\n  if (genres && genres.length) {\r\n    const genresEl = createNode('p', 'genres');\r\n    genresEl.textContent = genres.join(', ');\r\n    wrapper.append(genresEl);\r\n  }\r\n\r\n  // overview\r\n  if (film.overview) {\r\n    const overviewEl = createNode('p', 'overview');\r\n    overviewEl.textContent = film.overview;\r\n    wrapper.append(overviewEl);\r\n  }\r\n\r\n  // rating\r\n  const rateEl = createNode('p', 'rate');\r\n  const voteAverateEl = createNode('span', 'vote-value');\r\n  voteAverateEl.textContent = film.vote_average;\r\n  const voteCountEl = createNode('span', 'vote-count');\r\n  voteCountEl.textContent = film.vote_count;\r\n  rateEl.append(voteAverateEl, voteCountEl);\r\n  wrapper.append(rateEl);\r\n\r\n  return wrapper;\r\n}\r\nfunction renderError() {\r\n  const error = createNode('div', 'error');\r\n\r\n  const errorTitle = createNode('h3');\r\n  errorTitle.textContent = 'OOOPS!';\r\n\r\n  const errorText1 = createNode('p');\r\n  errorText1.textContent = 'The resource requested could not be found.';\r\n\r\n  const errorText2 = createNode('p');\r\n  const text2 = createNode('span');\r\n  text2.textContent = 'Try later or go to ';\r\n  const link = createNode('a');\r\n  link.setAttribute('href', 'index.html');\r\n  link.textContent = 'home page';\r\n  errorText2.append(text2, link);\r\n\r\n  error.append(errorTitle, errorText1, errorText2);\r\n  return error;\r\n}\r\nfunction showLoader() {\r\n  app.classList.add('loading');\r\n}\r\nfunction hideLoader() {\r\n  app.classList.remove('loading');\r\n}\r\nfunction resetContent() {\r\n  appContent.textContent = '';\r\n}\r\n","const formWr = document.querySelector('.form-wrapper');\r\nconst showFormBtn = formWr.querySelector('.show-form');\r\n\r\nshowFormBtn.addEventListener('click', (e) => {\r\n  e.preventDefault();\r\n  formWr.classList.add('open');\r\n\r\n  const input = formWr.querySelector('input.input');\r\n  if (input) {\r\n    input.focus();\r\n  }\r\n});\r\n","import api from './api';\r\n\r\nconst getQueryString = (obj) => {\r\n  return Object.keys(obj).reduce((str, item) => {\r\n    return (str += `&${item}=${obj[item]}`);\r\n  }, '');\r\n};\r\n\r\nconst fetchApi = async (params = {}, route = api.popular) => {\r\n  const queryParams = { language: 'en', ...params };\r\n  const queryString = getQueryString(queryParams);\r\n\r\n  const url = api.url + route + `?api_key=${api.key}` + queryString;\r\n\r\n  try {\r\n    const res = await fetch(url);\r\n    return res;\r\n  } catch (error) {\r\n    console.log('fetchApi ERROR: ', error);\r\n    return {\r\n      ok: false,\r\n      errorMsg: 'something gone wrong',\r\n    };\r\n  }\r\n};\r\n\r\nexport const getPopularMovies = async () => {\r\n  return fetchApi({}, api.route.popular);\r\n};\r\n\r\nexport const getMoviesByTitle = async (title) => {\r\n  const params = { query: title };\r\n  return fetchApi(params, api.route.title);\r\n};\r\n\r\nexport const getMovieById = async (id) => {\r\n  return fetchApi({}, api.route.movie + id);\r\n};\r\n\r\nexport const getMovieGenres = async () => {\r\n  return fetchApi({}, api.route.genres);\r\n};\r\n","// className template: 'block block__element block__element_mod'\r\nexport const createNode = (tag, className) => {\r\n  const el = document.createElement(tag);\r\n  if (className) {\r\n    const classNames = className.split(' ');\r\n    classNames.forEach((cn) => el.classList.add(cn));\r\n  }\r\n  return el;\r\n};\r\n\r\nexport const createRatingClassName = (rate) => {\r\n  if (rate >= 7) {\r\n    return 'rating__high';\r\n  } else if (rate >= 5) {\r\n    return 'rating__mid';\r\n  }\r\n  return 'rating__low';\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './scss/main.scss';\r\n\r\nimport './scripts/app.js';\r\nimport './scripts/form-container.js';\r\n"],"names":[],"sourceRoot":""}